<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:b="http://bootsfaces.net/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="/WEB-INF/templates/tpl_oaf.xhtml">
    <ui:define name="content" bootsFacesDecorator="true">
		<link type="text/css" rel="stylesheet" href="#{resource['css/table_list.css']}" />
		<h:form id="tenantManagementTableDiv" styleClass="tableContainer">
			<b:row>
				<h:panelGroup layout="block" styleClass="headerInformation">
					<h1><h:outputText value="#{msg.rd_tenants} Creation"/></h1>
					<hr />
				</h:panelGroup>
			</b:row>

			<b:column offsetXs="2" colXs="8">
				<b:inputText id="tenantName" value="#{tenantDataModel.tenant.name}"
							 required="true" requiredMessage="#{msg.rd_tenant_name_is_mandatory}"
							 label="#{msg.nameUpperCase}"/>
				<b:inputText id="tenantKey" value="#{tenantDataModel.tenant.tenantKey}"
							 required="true" requiredMessage="#{msg.rd_tenant_key_is_mandatory}"
							 label="#{msg.key}"/>
				<b:dateTimePicker validatorMessage="#{msg.rd_tenant_start_date_invalid}"
								  converter="radienLocalDateTimeConverter"
								  value="#{tenantDataModel.tenant.tenantStart}" showTime="false" format="DD-MM-YYYY"
								  required="true" requiredMessage="#{msg.rd_tenant_start_date_is_mandatory}"
								  label="#{msg.start}"/>
				<b:dateTimePicker validatorMessage="#{msg.rd_tenant_end_date_invalid}"
								  converter="radienLocalDateTimeConverter"
								  value="#{tenantDataModel.tenant.tenantEnd}" showTime="false" format="DD-MM-YYYY"
								  required="false"
								  label="#{msg.end}"/>
				<b:selectOneMenu id="tenantType" value="#{tenantDataModel.tenant.tenantType}"
								 required="true" requiredMessage="#{msg.rd_tenant_type_is_mandatory}"
								 label="#{msg.type}" select2="true" update="@parent" process="@form">
					<f:selectItem itemLabel="#{msg.rd_tenant_remind_select_tenant_type}" itemValue="#{null}"/>
					<f:selectItems value="#{tenantDataModel.tenantTypes}" var="tenantType"
								   itemValue="#{tenantType}" itemLabel="#{tenantType.name}"/>
				</b:selectOneMenu>

				<b:row id="nonRootInformations" rendered="#{tenantDataModel.tenant.tenantType == 'CLIENT_TENANT' || tenantDataModel.tenant.tenantType == 'SUB_TENANT'}" value="#{tenantDataModel.tenant.parentId}">
					<b:selectOneMenu id="tenantParentId" value="#{tenantDataModel.tenant.parentId}"
									 label="#{msg.rd_tenant_parent}" select2="true">
						<f:selectItem value="#{null}" itemLabel="#{msg.rd_tenant_remind_select_parent}"/>
						<f:selectItems value="#{tenantDataModel.parents}" var="tenantParent"
									   itemValue="#{tenantParent.id}"
									   itemLabel="#{tenantParent.name} - #{tenantParent.tenantKey} - #{tenantParent.tenantType.name}"/>
					</b:selectOneMenu>
				</b:row>

				<b:row id="clientInformations" rendered="#{tenantDataModel.tenant.tenantType == 'CLIENT_TENANT'}">
					<b:inputText id="tenantClientAddress" value="#{tenantDataModel.tenant.clientAddress}"
								 label="#{msg.address}"/>
					<b:inputText id="tenantClientZipCode" value="#{tenantDataModel.tenant.clientZipCode}"
								 label="#{msg.zipCode}"/>
					<b:inputText id="tenantClientCity" value="#{tenantDataModel.tenant.clientCity}"
								 label="#{msg.city}"/>
					<b:inputText id="tenantClientCountry" value="#{tenantDataModel.tenant.clientCountry}"
								 label="#{msg.country}"/>
					<b:inputText id="tenantClientPhoneNumber" value="#{tenantDataModel.tenant.clientPhoneNumber}"
								 label="#{msg.phoneNumber}"/>
					<b:inputText id="tenantClientEmail" value="#{tenantDataModel.tenant.clientEmail}"
								 label="#{msg.email}"/>
				</b:row>

				<b:row id="subInformations" rendered="#{tenantDataModel.tenant.tenantType == 'SUB_TENANT'}">
					<b:selectOneMenu id="tenantClientId" value="#{tenantDataModel.tenant.clientId}"
									 label="#{msg.rd_tenant_client}" select2="true">
						<f:selectItem value="#{null}" itemLabel="#{msg.rd_tenant_remind_select_client}"/>
						<f:selectItems value="#{tenantDataModel.parents}" var="tenanClientParent"
									   itemValue="#{tenanClientParent.id}"
									   itemLabel="#{tenanClientParent.name} - #{tenanClientParent.tenantKey} - #{tenanClientParent.tenantType.name}"/>
					</b:selectOneMenu>
				</b:row>

			<b:buttonGroup>
				<b:commandButton value="#{msg.save}"
								 action="#{tenantDataModel.save(tenantDataModel.tenant)}"
								 iconAwesome="fa-function"
								 iconAlign="center"/>

				<b:commandButton value="#{msg.returnButton}"
								 action="#{tenantDataModel.returnHome}"
								 iconAwesome="fa-arrow-circle-left"
								 immediate="true"
								 iconAlign="center"/>
			</b:buttonGroup>
			</b:column>
		</h:form>
    </ui:define>
</ui:composition>